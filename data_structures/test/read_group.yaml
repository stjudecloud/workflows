validate_read_group:
  - name: valid_read_groups
    inputs:
      read_group:
        - ID: id
          SM: sample
        - ID: R2
          SM: sampleA
          LB: spaces are allowed in LB
          BC: barcode with a space
          PU: platform_unit
          PL: ILLUMINA
          CN: center_name
          DT: date
          DS: description
          PI: 1
          PG: program_group
          PM: platform_model
          FO: ACMG
          KS: key_sequence
  - name: id_with_spaces
    inputs:
      read_group:
        - ID: ids should not have spaces # this is a problem
          SM: sample_a
          LB: library
          BC: barcode
          PU: platform_unit
          PL: ILLUMINA
          CN: center_name
          DT: date
          DS: description
          PI: 1
          PG: program_group
          PM: platform_model
          FO: ACMG
          KS: key_sequence
    assertions:
      exit_code: 1
      stderr:
        - ID must not contain spaces
  - name: sample_with_spaces
    inputs:
      read_group:
        - ID: R123
          SM: samples should not have spaces
          LB: library can have spaces though
          BC: barcode
          PU: platform_unit
          PL: ILLUMINA
          CN: center_name
          DT: date
          DS: description
          PI: 1
          PG: program_group
          PM: platform_model
          FO: ACMG
          KS: key_sequence
    assertions:
      exit_code: 1
      stderr:
        - SM must not contain spaces
  - name: spaces_allowed
    inputs:
      read_group:
        - ID: technically permissable but gross
          SM: same here!
      restrictive:
        - false
  - name: missing_sample
    inputs:
      read_group:
        - ID: R123
          LB: library
    assertions:
      exit_code: 1
      stderr:
        - SM is required
  - name: missing_sample_allowed
    inputs:
      read_group:
        - ID: R1
          LB: lib
      required_fields:
        - []

get_read_groups:
  - name: works
    inputs:
      bam:
        - test.bam

# TODO: test read_group_to_string
