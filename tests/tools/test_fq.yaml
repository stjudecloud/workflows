- name: fqlint
  tags:
    - miniwdl
    - fq
  command: >-
    miniwdl run -d test-output/. --copy-input-files --task fqlint tools/fq.wdl read_one_fastq_gz=tests/tools/input/test_R1.fq.gz read_two_fastq_gz=tests/tools/input/test_R2.fq.gz
  files:
    - path: test-output/out/validated_read1/test_R1.fq.gz
    - path: test-output/out/validated_read2/test_R2.fq.gz

- name: subsample_fq
  tags:
    - miniwdl
    - fq
  command: >-
    miniwdl run -d test-output/. --copy-input-files --task subsample tools/fq.wdl read_one_fastq_gz=tests/tools/input/test_R1.fq.gz read_two_fastq_gz=tests/tools/input/test_R2.fq.gz record_count=1000
  files:
    - path: test-output/out/subsampled_read1/test_R1.subsampled.fastq.gz
    - path: test-output/out/subsampled_read2/test_R2.subsampled.fastq.gz

- name: subsample_fq_percentage
  tags:
    - miniwdl
    - fq
  command: >-
    miniwdl run -d test-output/. --copy-input-files --task subsample tools/fq.wdl read_one_fastq_gz=tests/tools/input/test_R1.fq.gz read_two_fastq_gz=tests/tools/input/test_R2.fq.gz probability=0.01
  files:
    - path: test-output/out/subsampled_read1/test_R1.subsampled.fastq.gz
    - path: test-output/out/subsampled_read2/test_R2.subsampled.fastq.gz
