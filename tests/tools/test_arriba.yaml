- name: arriba
  tags:
    - arriba
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t arriba -i tests/tools/input_json/arriba.json tools/arriba.wdl
  files:
    - path: output/outputs.json
      contains:
      - fusions.tsv
      - fusions.discarded.tsv

- name: arriba_tsv_to_vcf
  tags:
    - arriba
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t arriba_tsv_to_vcf tools/arriba.wdl fusions="tests/input/fusions.tsv" reference_fasta="tests/input/GRCh38.chr9_chr22.fa.gz"
  files:
    - path: output/outputs.json
      contains:
      - fusions.vcf

- name: arriba_extract_fusion_supporting_alignments
  tags:
    - arriba
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t arriba_extract_fusion_supporting_alignments tools/arriba.wdl fusions="tests/input/fusions.tsv" bam="tests/input/Aligned.sortedByCoord.chr9_chr22.bam" bam_index="tests/input/Aligned.sortedByCoord.chr9_chr22.bam.bai"
  files:
    - path: output/outputs.json
      contains:
      - fusions_1.bam

- name: arriba_annotate_exon_numbers
  tags:
    - arriba
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t arriba_annotate_exon_numbers tools/arriba.wdl fusions="tests/input/fusions.tsv" gtf="tests/input/gencode.v31.chr9_chr22.gtf.gz"
  files:
    - path: output/outputs.json
      contains:
      - fusions.annotated.tsv
