- name: gatk4_split_n_cigar_reads
  tags:
    - gatk4
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t split_n_cigar_reads -i tests/tools/input_json/gatk4_split_n_cigar_reads.json tools/gatk4.wdl
  files:
    - path: output/outputs.json
      contains:
      - split.bam
      - split.bam.bai
      - split.bam.md5

- name: gatk4_base_recalibrator
  tags:
    - gatk4
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t base_recalibrator -i tests/tools/input_json/gatk4_base_recalibrator.json tools/gatk4.wdl
  files:
    - path: output/outputs.json
      contains:
      - test_rnaseq_variant.recal.txt

- name: gatk4_apply_bqsr
  tags:
    - gatk4
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t apply_bqsr -i tests/tools/input_json/gatk4_apply_bqsr.json tools/gatk4.wdl
  files:
    - path: output/outputs.json
      contains:
      - test_rnaseq_variant.bqsr.bam
      - test_rnaseq_variant.bqsr.bam.bai

- name: gatk4_haplotype_caller
  tags:
    - gatk4
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t haplotype_caller -i tests/tools/input_json/gatk4_haplotype_caller.json tools/gatk4.wdl
  files:
    - path: output/outputs.json
      contains:
      - test_rnaseq_variant.vcf.gz

- name: gatk4_variant_filtration
  tags:
    - gatk4
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t variant_filtration -i tests/tools/input_json/gatk4_variant_filtration.json tools/gatk4.wdl
  files:
    - path: output/outputs.json
      contains:
      - test1.filtered.vcf.gz
      - test1.filtered.vcf.gz.tbi

- name: gatk4_mark_duplicates_spark
  tags:
    - gatk4
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t mark_duplicates_spark tools/gatk4.wdl bam="tests/input/test.bwa_aln_pe.chrY_chrM.bam"
  files:
    - path: output/outputs.json
      contains:
      - test.bwa_aln_pe.chrY_chrM.MarkDuplicates.bam
      - test.bwa_aln_pe.chrY_chrM.MarkDuplicates.bam.bai
      - test.bwa_aln_pe.chrY_chrM.MarkDuplicates.metrics.txt