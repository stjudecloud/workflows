- name: sambamba_index
  tags:
    - sambamba
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t index tools/sambamba.wdl bam="tests/input/test.bwa_aln_pe.chrY_chrM.bam"
  files:
    - path: output/outputs.json
      contains:
      - test.bwa_aln_pe.chrY_chrM.bam.bai

- name: sambamba_merge
  tags:
    - sambamba
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t merge -i tests/tools/input_json/sambamba_merge.json tools/sambamba.wdl
  files:
    - path:  output/outputs.json
      contains:
      - test.merged.bam

- name: sambamba_sort
  tags:
    - sambamba
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t sort tools/sambamba.wdl bam="tests/input/test.bwa_aln_pe.chrY_chrM.bam"
  files:
    - path: output/outputs.json
      contains:
      - test.bwa_aln_pe.chrY_chrM.sorted.bam

- name: sambamba_flagstat
  tags:
    - sambamba
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t flagstat tools/sambamba.wdl bam="tests/input/test.bwa_aln_pe.chrY_chrM.bam"
  files:
    - path: output/outputs.json
      contains:
      - test.bwa_aln_pe.chrY_chrM.flagstat.txt

- name: sambamba_markdup
  tags:
    - sambamba
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t markdup tools/sambamba.wdl bam="tests/input/test.bwa_aln_pe.chrY_chrM.bam"
  files:
    - path: output/outputs.json
      contains:
      - test.bwa_aln_pe.chrY_chrM.markdup.bam
      - test.bwa_aln_pe.chrY_chrM.markdup.bam.bai
      - test.bwa_aln_pe.chrY_chrM.markdup_log.txt