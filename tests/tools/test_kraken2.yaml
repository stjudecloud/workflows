- name: download_taxonomy
  tags:
    - kraken
    - reference
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t download_taxonomy tools/kraken2.wdl
  files:
    - path: output/out/taxonomy/kraken2_taxonomy.tar.gz

- name: download_library
  tags:
    - kraken
    - reference
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t download_library tools/kraken2.wdl library_name='fungi'
  files:
    - path: output/out/library/kraken2_fungi_library.tar.gz

- name: create_library_from_fastas
  tags:
    - kraken
    - reference
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t create_library_from_fastas -i tests/tools/input_json/kraken_create_library_from_fastas.json tools/kraken2.wdl
  files:
    - path: output/out/custom_library/kraken2_custom_library.tar.gz

- name: build_db
  tags:
    - kraken
    - reference
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t build_db -i tests/tools/input_json/kraken_build_db.json tools/kraken2.wdl
  files:
    - path: output/out/built_db/kraken2_db.tar.gz

- name: kraken
  tags:
    - kraken
  command: >-
    ./developer_scripts/run_sprocket_or_miniwdl.sh -t kraken tools/kraken2.wdl read_one_fastq_gz="tests/input/test_R1.fq.gz" read_two_fastq_gz="tests/input/test_R2.fq.gz" db="tests/input/kraken2_db.tar.gz"
  files:
    - path: output/out/report/test.kraken2.txt
